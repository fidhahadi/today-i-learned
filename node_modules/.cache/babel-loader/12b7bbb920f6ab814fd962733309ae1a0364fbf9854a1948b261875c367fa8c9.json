{"ast":null,"code":"import _regeneratorRuntime from\"/home/fidha/Desktop/work/TodayILearned/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"/home/fidha/Desktop/work/TodayILearned/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"/home/fidha/Desktop/work/TodayILearned/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/fidha/Desktop/work/TodayILearned/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import supabase from'./supabase';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CATEGORIES=[{name:\"technology\",color:\"#3b82f6\"},{name:\"science\",color:\"#16a34a\"},{name:\"finance\",color:\"#ef4444\"},{name:\"society\",color:\"#eab308\"},{name:\"entertainment\",color:\"#db2777\"},{name:\"health\",color:\"#14b8a6\"},{name:\"history\",color:\"#f97316\"},{name:\"news\",color:\"#8b5cf6\"}];function Fact(_ref){var _CATEGORIES$find;var fact=_ref.fact,setFacts=_ref.setFacts;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isUpdating=_useState2[0],setisUpdating=_useState2[1];var isDisputed=fact.votesInteresting+fact.votesMindblowing<fact.votesFalse;function handleVote(_x){return _handleVote.apply(this,arguments);}function _handleVote(){_handleVote=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(columnName){var _yield$supabase$from$,updatedFact,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setisUpdating(true);_context.next=3;return supabase.from(\"facts\").update(_defineProperty({},columnName,fact[columnName]+1)).eq(\"id\",fact.id).select();case 3:_yield$supabase$from$=_context.sent;updatedFact=_yield$supabase$from$.data;error=_yield$supabase$from$.error;setisUpdating(false);if(!error)setFacts(function(facts){return facts.map(function(f){return f.id===fact.id?updatedFact[0]:f;});});case 8:case\"end\":return _context.stop();}},_callee);}));return _handleVote.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"li\",{className:\"fact\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[isDisputed?/*#__PURE__*/_jsx(\"span\",{className:\"disputed\",children:\"[\\u26D4\\uFE0F Disputed]\"}):null,fact.text,/*#__PURE__*/_jsx(\"a\",{className:\"source\",href:fact.source,children:\"(Source)\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"tag\",style:{backgroundColor:(_CATEGORIES$find=CATEGORIES.find(function(cat){return cat.name===fact.category;}))===null||_CATEGORIES$find===void 0?void 0:_CATEGORIES$find.color},children:fact.category}),/*#__PURE__*/_jsxs(\"div\",{className:\"vote-buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return handleVote(\"votesInteresting\");},disabled:isUpdating,children:[\"\\uD83D\\uDC4D \",fact.votesInteresting]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return handleVote(\"votesMindblowing\");},disabled:isUpdating,children:[\"\\uD83E\\uDD2F \",fact.votesMindblowing]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return handleVote(\"votesFalse\");},disabled:isUpdating,children:[\"\\u26D4\\uFE0F \",fact.votesFalse]})]})]},fact.id)});}export default Fact;","map":{"version":3,"names":["React","useState","supabase","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CATEGORIES","name","color","Fact","_ref","_CATEGORIES$find","fact","setFacts","_useState","_useState2","_slicedToArray","isUpdating","setisUpdating","isDisputed","votesInteresting","votesMindblowing","votesFalse","handleVote","_x","_handleVote","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","columnName","_yield$supabase$from$","updatedFact","error","wrap","_callee$","_context","prev","next","from","update","_defineProperty","eq","id","select","sent","data","facts","map","f","stop","children","className","text","href","source","style","backgroundColor","find","cat","category","onClick","disabled"],"sources":["/home/fidha/Desktop/work/TodayILearned/src/Fact.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport supabase from './supabase';\nimport './style.css';\n\n\nconst CATEGORIES = [\n    { name: \"technology\", color: \"#3b82f6\" },\n    { name: \"science\", color: \"#16a34a\" },\n    { name: \"finance\", color: \"#ef4444\" },\n    { name: \"society\", color: \"#eab308\" },\n    { name: \"entertainment\", color: \"#db2777\" },\n    { name: \"health\", color: \"#14b8a6\" },\n    { name: \"history\", color: \"#f97316\" },\n    { name: \"news\", color: \"#8b5cf6\" },\n];\n\n\nfunction Fact({ fact, setFacts }) {\n    const [isUpdating, setisUpdating] = useState(false);\n    const isDisputed = fact.votesInteresting + fact.votesMindblowing < fact.votesFalse;\n\n    async function handleVote(columnName) {\n        setisUpdating(true);\n        const { data: updatedFact, error } = await supabase.from(\"facts\").update({ [columnName]: fact[columnName] + 1 })\n            .eq(\"id\", fact.id)\n            .select();\n        setisUpdating(false);\n\n        if (!error)\n            setFacts((facts) => facts.map((f) => (f.id === fact.id ? updatedFact[0] : f))\n            );\n    }\n\n\n    return (\n        <>\n            <li key={fact.id} className=\"fact\">\n                <p >\n                    {isDisputed ? <span className='disputed'>[‚õîÔ∏è Disputed]</span> : null}\n                    {fact.text}\n                    <a className=\"source\" href={fact.source}>(Source)</a>\n                </p>\n                <span className=\"tag\" style={{\n                    backgroundColor: CATEGORIES.find((cat) => cat.name === fact.category)?.color\n                }}>{fact.category}</span>\n                <div className=\"vote-buttons\">\n                    <button onClick={() => handleVote(\"votesInteresting\")} disabled={isUpdating} >üëç {fact.votesInteresting}</button>\n                    <button onClick={() => handleVote(\"votesMindblowing\")} disabled={isUpdating}>ü§Ø {fact.votesMindblowing}</button>\n                    <button onClick={() => handleVote(\"votesFalse\")} disabled={isUpdating}>‚õîÔ∏è {fact.votesFalse}</button>\n                </div>\n            </li></>\n    )\n}\n\nexport default Fact\n\n"],"mappings":"kgBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAGrB,GAAM,CAAAC,UAAU,CAAG,CACf,CAAEC,IAAI,CAAE,YAAY,CAAEC,KAAK,CAAE,SAAU,CAAC,CACxC,CAAED,IAAI,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAU,CAAC,CACrC,CAAED,IAAI,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAU,CAAC,CACrC,CAAED,IAAI,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAU,CAAC,CACrC,CAAED,IAAI,CAAE,eAAe,CAAEC,KAAK,CAAE,SAAU,CAAC,CAC3C,CAAED,IAAI,CAAE,QAAQ,CAAEC,KAAK,CAAE,SAAU,CAAC,CACpC,CAAED,IAAI,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAU,CAAC,CACrC,CAAED,IAAI,CAAE,MAAM,CAAEC,KAAK,CAAE,SAAU,CAAC,CACrC,CAGD,QAAS,CAAAC,IAAIA,CAAAC,IAAA,CAAqB,KAAAC,gBAAA,IAAlB,CAAAC,IAAI,CAAAF,IAAA,CAAJE,IAAI,CAAEC,QAAQ,CAAAH,IAAA,CAARG,QAAQ,CAC1B,IAAAC,SAAA,CAAoChB,QAAQ,CAAC,KAAK,CAAC,CAAAiB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5CG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAChC,GAAM,CAAAI,UAAU,CAAGP,IAAI,CAACQ,gBAAgB,CAAGR,IAAI,CAACS,gBAAgB,CAAGT,IAAI,CAACU,UAAU,CAAC,QAEpE,CAAAC,UAAUA,CAAAC,EAAA,SAAAC,WAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,YAAA,EAAAA,WAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAzB,SAAAC,QAA0BC,UAAU,MAAAC,qBAAA,CAAAC,WAAA,CAAAC,KAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAChCtB,aAAa,CAAC,IAAI,CAAC,CAACoB,QAAA,CAAAE,IAAA,SACuB,CAAAzC,QAAQ,CAAC0C,IAAI,CAAC,OAAO,CAAC,CAACC,MAAM,CAAAC,eAAA,IAAIX,UAAU,CAAGpB,IAAI,CAACoB,UAAU,CAAC,CAAG,CAAC,CAAE,CAAC,CAC3GY,EAAE,CAAC,IAAI,CAAEhC,IAAI,CAACiC,EAAE,CAAC,CACjBC,MAAM,CAAC,CAAC,QAAAb,qBAAA,CAAAK,QAAA,CAAAS,IAAA,CAFCb,WAAW,CAAAD,qBAAA,CAAjBe,IAAI,CAAeb,KAAK,CAAAF,qBAAA,CAALE,KAAK,CAGhCjB,aAAa,CAAC,KAAK,CAAC,CAEpB,GAAI,CAACiB,KAAK,CACNtB,QAAQ,CAAC,SAACoC,KAAK,QAAK,CAAAA,KAAK,CAACC,GAAG,CAAC,SAACC,CAAC,QAAM,CAAAA,CAAC,CAACN,EAAE,GAAKjC,IAAI,CAACiC,EAAE,CAAGX,WAAW,CAAC,CAAC,CAAC,CAAGiB,CAAC,EAAC,CAAC,EAC7E,CAAC,CAAC,wBAAAb,QAAA,CAAAc,IAAA,MAAArB,OAAA,GACT,UAAAN,WAAA,CAAAC,KAAA,MAAAC,SAAA,GAGD,mBACI1B,IAAA,CAAAI,SAAA,EAAAgD,QAAA,cACIlD,KAAA,OAAkBmD,SAAS,CAAC,MAAM,CAAAD,QAAA,eAC9BlD,KAAA,MAAAkD,QAAA,EACKlC,UAAU,cAAGlB,IAAA,SAAMqD,SAAS,CAAC,UAAU,CAAAD,QAAA,CAAC,yBAAa,CAAM,CAAC,CAAG,IAAI,CACnEzC,IAAI,CAAC2C,IAAI,cACVtD,IAAA,MAAGqD,SAAS,CAAC,QAAQ,CAACE,IAAI,CAAE5C,IAAI,CAAC6C,MAAO,CAAAJ,QAAA,CAAC,UAAQ,CAAG,CAAC,EACtD,CAAC,cACJpD,IAAA,SAAMqD,SAAS,CAAC,KAAK,CAACI,KAAK,CAAE,CACzBC,eAAe,EAAAhD,gBAAA,CAAEL,UAAU,CAACsD,IAAI,CAAC,SAACC,GAAG,QAAK,CAAAA,GAAG,CAACtD,IAAI,GAAKK,IAAI,CAACkD,QAAQ,GAAC,UAAAnD,gBAAA,iBAApDA,gBAAA,CAAsDH,KAC3E,CAAE,CAAA6C,QAAA,CAAEzC,IAAI,CAACkD,QAAQ,CAAO,CAAC,cACzB3D,KAAA,QAAKmD,SAAS,CAAC,cAAc,CAAAD,QAAA,eACzBlD,KAAA,WAAQ4D,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAxC,UAAU,CAAC,kBAAkB,CAAC,EAAC,CAACyC,QAAQ,CAAE/C,UAAW,CAAAoC,QAAA,EAAE,eAAG,CAACzC,IAAI,CAACQ,gBAAgB,EAAS,CAAC,cACjHjB,KAAA,WAAQ4D,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAxC,UAAU,CAAC,kBAAkB,CAAC,EAAC,CAACyC,QAAQ,CAAE/C,UAAW,CAAAoC,QAAA,EAAC,eAAG,CAACzC,IAAI,CAACS,gBAAgB,EAAS,CAAC,cAChHlB,KAAA,WAAQ4D,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAxC,UAAU,CAAC,YAAY,CAAC,EAAC,CAACyC,QAAQ,CAAE/C,UAAW,CAAAoC,QAAA,EAAC,eAAG,CAACzC,IAAI,CAACU,UAAU,EAAS,CAAC,EACnG,CAAC,GAbDV,IAAI,CAACiC,EAcV,CAAC,CAAE,CAAC,CAEpB,CAEA,cAAe,CAAApC,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}